# ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)

## ğŸ“‹ æ¦‚è¿°

ç«¯åˆ°ç«¯æµ‹è¯•éªŒè¯å®Œæ•´çš„ç”¨æˆ·æ“ä½œæµç¨‹ï¼Œä»ç”¨æˆ·ç™»å½•åˆ°å®Œæˆä¸šåŠ¡ç›®æ ‡çš„æ•´ä¸ªè¿‡ç¨‹ã€‚

## ğŸ—ï¸ æ¶æ„

```
tests/e2e/
â”œâ”€â”€ task-lifecycle.e2e.test.ts          # T105: ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ
â”œâ”€â”€ account-recovery.e2e.test.ts        # T106: è´¦å·æ¢å¤æµç¨‹
â”œâ”€â”€ batch-operations.e2e.test.ts        # T107: æ‰¹é‡æ“ä½œ
â”œâ”€â”€ data-visualization.e2e.test.ts      # T108: æ•°æ®å¯è§†åŒ–
â””â”€â”€ README.md                           # æœ¬æ–‡æ¡£
```

## ğŸ¯ æµ‹è¯•åœºæ™¯

### T105: ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸæµ‹è¯•

**æµç¨‹**: ç®¡ç†å‘˜ç™»å½• â†’ åˆ›å»ºè§†é¢‘ç›‘æ§ä»»åŠ¡ â†’ ä»»åŠ¡å¼€å§‹è¿è¡Œ â†’ æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ… â†’ åœæ­¢ä»»åŠ¡

**éªŒè¯ç‚¹**:
- âœ… ç®¡ç†å‘˜å¯ä»¥æˆåŠŸç™»å½•
- âœ… åˆ›å»ºä»»åŠ¡åçŠ¶æ€ä¸º "running"
- âœ… ä»»åŠ¡è¯¦æƒ…æ­£ç¡®æ˜¾ç¤º
- âœ… å¯ä»¥åœæ­¢æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡

### T106: è´¦å·æ¢å¤æµç¨‹æµ‹è¯•

**æµç¨‹**: è´¦å·è¿‡æœŸ â†’ ä»»åŠ¡è‡ªåŠ¨æš‚åœ â†’ é‡æ–°ç»‘å®šè´¦å· â†’ ä»»åŠ¡æ¢å¤è¿è¡Œ

**éªŒè¯ç‚¹**:
- âœ… è´¦å·è¿‡æœŸæ—¶ä»»åŠ¡è‡ªåŠ¨æš‚åœ
- âœ… é‡æ–°ç»‘å®šè´¦å·æˆåŠŸ
- âœ… ä»»åŠ¡å¯ä»¥æ¢å¤è¿è¡Œ
- âœ… æ•°æ®é‡‡é›†æ­£å¸¸

### T107: æ‰¹é‡æ“ä½œæµ‹è¯•

**æµç¨‹**: åˆ›å»ºå¤šä¸ªä»»åŠ¡ â†’ æ‰¹é‡é€‰æ‹© â†’ æ‰¹é‡åœæ­¢ â†’ æ‰¹é‡å¯åŠ¨

**éªŒè¯ç‚¹**:
- âœ… å¯ä»¥æ‰¹é‡é€‰æ‹©å¤šä¸ªä»»åŠ¡
- âœ… æ‰¹é‡åœæ­¢æˆåŠŸ
- âœ… æ‰¹é‡å¯åŠ¨æˆåŠŸ
- âœ… æ“ä½œç»“æœæ­£ç¡®æ˜¾ç¤º

### T108: æ•°æ®å¯è§†åŒ–æµ‹è¯•

**æµç¨‹**: åˆ›å»ºä»»åŠ¡ â†’ ç­‰å¾…æ•°æ®é‡‡é›† â†’ æŸ¥çœ‹æ•°æ®è¶‹åŠ¿å›¾

**éªŒè¯ç‚¹**:
- âœ… æ•°æ®é‡‡é›†æˆåŠŸ
- âœ… è¶‹åŠ¿å›¾æ­£ç¡®æ¸²æŸ“
- âœ… æ•°æ®ç‚¹å‡†ç¡®æ˜¾ç¤º
- âœ… æ—¶é—´èŒƒå›´ç­›é€‰æœ‰æ•ˆ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æµ‹è¯•æ¡†æ¶**: Vitest
- **æµ‹è¯•ç¯å¢ƒ**: Bun runtime
- **æ•°æ®åº“**: SQLite in-memory
- **HTTP**: Fetch API

## ğŸ“ æµ‹è¯•æ¨¡æ¿

```typescript
import { describe, test, expect, beforeAll, afterAll } from 'vitest'
import { setupTestDatabase, teardownTestDatabase } from '../helpers/test-db'
import { createAuthenticatedUser } from '../integration/helpers/auth-helper'
import { post, get } from '../integration/helpers/test-helpers'

describe('E2E: [Feature Name]', () => {
  let db, token
  const BASE_URL = 'http://localhost:3000'

  beforeAll(async () => {
    db = await setupTestDatabase()
    // TODO: å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨
    const { token: authToken } = await createAuthenticatedUser(db, BASE_URL, 'admin')
    token = authToken
  })

  afterAll(async () => {
    // TODO: åœæ­¢æµ‹è¯•æœåŠ¡å™¨
    await teardownTestDatabase(db)
  })

  test.skip('should complete [workflow]', async () => {
    // 1. æ‰§è¡Œæ“ä½œ
    // 2. éªŒè¯ç»“æœ
    // 3. æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
  })
})
```

## ğŸš€ è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰E2Eæµ‹è¯•
bun test tests/e2e/

# è¿è¡Œç‰¹å®šæµ‹è¯•
bun test tests/e2e/task-lifecycle.e2e.test.ts

# è¯¦ç»†è¾“å‡º
bun test tests/e2e/ --reporter=verbose

# Watchæ¨¡å¼
bun test tests/e2e/ --watch
```

## ğŸ“Š å½“å‰çŠ¶æ€

| æµ‹è¯•æ–‡ä»¶ | åœºæ™¯æ•° | çŠ¶æ€ |
|---------|--------|------|
| task-lifecycle.e2e.test.ts | 1 | âœ… æ¨¡æ¿å·²åˆ›å»º |
| account-recovery.e2e.test.ts | 1 | âœ… æ¨¡æ¿å·²åˆ›å»º |
| batch-operations.e2e.test.ts | 1 | âœ… æ¨¡æ¿å·²åˆ›å»º |
| data-visualization.e2e.test.ts | 1 | âœ… æ¨¡æ¿å·²åˆ›å»º |

**æ€»è®¡**: 4ä¸ªE2Eæµ‹è¯•åœºæ™¯

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“å®ä¾‹
2. **å¼‚æ­¥æ“ä½œ**: E2Eæµ‹è¯•æ¶‰åŠå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œæ³¨æ„æ­£ç¡®å¤„ç†Promise
3. **è¶…æ—¶è®¾ç½®**: E2Eæµ‹è¯•å¯èƒ½è€—æ—¶è¾ƒé•¿ï¼Œé€‚å½“å¢åŠ è¶…æ—¶æ—¶é—´
4. **æ•°æ®æ¸…ç†**: æµ‹è¯•ç»“æŸåæ¸…ç†æ‰€æœ‰æµ‹è¯•æ•°æ®
5. **æœåŠ¡å™¨ä¾èµ–**: éœ€è¦æµ‹è¯•æœåŠ¡å™¨è¿è¡Œåæ‰èƒ½æ‰§è¡Œï¼ˆå½“å‰ä½¿ç”¨`test.skip`ï¼‰

## ğŸ”§ å¯ç”¨æµ‹è¯•

å½“æµ‹è¯•æœåŠ¡å™¨å®ç°åï¼š

1. å®ç° `startTestServer` å‡½æ•°
2. ç§»é™¤æ‰€æœ‰ `test.skip`ï¼Œæ”¹ä¸º `test`
3. è¿è¡Œæµ‹è¯•: `bun test tests/e2e/`

è¯¦ç»†æ­¥éª¤è§: `backend/tests/integration/IMPLEMENTATION_PLAN.md`

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é›†æˆæµ‹è¯•æ–‡æ¡£](../integration/README.md)
- [å•å…ƒæµ‹è¯•æ–‡æ¡£](../unit/README.md)
- [æµ‹è¯•ç­–ç•¥](../../../docs/testing-strategy.md)

---

*ç”Ÿæˆæ—¶é—´: 2025-12-25*  
*Phase 6: User Story 4 - ç«¯åˆ°ç«¯æµ‹è¯•*

