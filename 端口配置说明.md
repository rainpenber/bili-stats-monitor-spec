# ç«¯å£é…ç½®è¯´æ˜

**æ›´æ–°æ—¶é—´**: 2025-12-25  
**ç‰ˆæœ¬**: 2.0

---

## ğŸ”Œ å½“å‰ç«¯å£é…ç½®

### åç«¯æœåŠ¡
- **ç«¯å£**: `38080` âœ¨ æ–°ç«¯å£
- **åœ°å€**: http://localhost:38080
- **è¯´æ˜**: ä½¿ç”¨ä¸å¸¸è§ç«¯å£ï¼Œé¿å…ä¸å…¶ä»–æœåŠ¡å†²çª

### å‰ç«¯æœåŠ¡
- **ç«¯å£**: `5173` (ä¸»)ã€`5174`ã€`5175` (è‡ªåŠ¨é€‰æ‹©)
- **åœ°å€**: http://localhost:5173
- **ä»£ç†**: `/api` â†’ `http://localhost:38080`

---

## ğŸ“ ç«¯å£æ›´æ”¹å†å²

### v2.0 (2025-12-25)
- âœ… åç«¯ç«¯å£: `3000` â†’ `38080`
- **åŸå› **: é¿å…ä¸å¸¸è§æœåŠ¡ï¼ˆå¦‚ React Dev Serverã€Express é»˜è®¤ç«¯å£ï¼‰å†²çª
- **ä¼˜åŠ¿**: 
  - 38080 ä¸æ˜¯å¸¸è§ç«¯å£ï¼Œå†²çªæ¦‚ç‡ä½
  - ä¿ç•™äº† 8080 çš„æ˜“è®°æ€§ï¼ˆ38080 = 3 + 8080ï¼‰

### v1.0 (åˆå§‹é…ç½®)
- åç«¯ç«¯å£: `3000`
- **é—®é¢˜**: 
  - 3000 æ˜¯ Reactã€Next.js ç­‰æ¡†æ¶çš„é»˜è®¤ç«¯å£
  - å®¹æ˜“ä¸å…¶ä»–å¼€å‘æœåŠ¡å†²çª
  - é¢‘ç¹å‡ºç° "port in use" é”™è¯¯

---

## ğŸ”§ é…ç½®æ–‡ä»¶ä½ç½®

### åç«¯é…ç½®

**å¼€å‘ç¯å¢ƒ**: `backend/.env.development`
```bash
PORT=38080
```

**ç”Ÿäº§ç¯å¢ƒ**: `backend/.env.production`
```bash
PORT=38080
```

### å‰ç«¯é…ç½®

**Vite é…ç½®**: `frontend/web/vite.config.ts`
```typescript
export default defineConfig({
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:38080',
        changeOrigin: true,
      },
    },
  },
})
```

**ç¯å¢ƒé…ç½®**: `frontend/web/.env.development`
```bash
VITE_API_BASE_URL=http://localhost:38080
```

---

## ğŸ¯ è®¿é—®åœ°å€

### å¼€å‘ç¯å¢ƒ

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯åº”ç”¨ | http://localhost:5173 | ç”¨æˆ·è®¿é—®å…¥å£ |
| åç«¯ API | http://localhost:38080 | API æœåŠ¡ |
| Health Check | http://localhost:38080/health | å¥åº·æ£€æŸ¥ |

### å¸¸ç”¨ API ç«¯ç‚¹

```bash
# Health Check
curl http://localhost:38080/health

# ç³»ç»Ÿè®¾ç½®
curl http://localhost:38080/api/v1/settings

# ä»»åŠ¡åˆ—è¡¨
curl http://localhost:38080/api/v1/tasks

# è´¦å·åˆ—è¡¨
curl http://localhost:38080/api/v1/accounts
```

---

## ğŸ” ç«¯å£æ£€æŸ¥

### æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨

**Windows**:
```bash
netstat -ano | findstr :38080
```

**Linux/Mac**:
```bash
lsof -i :38080
```

### åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹

**Windows**:
```bash
# æŸ¥æ‰¾è¿›ç¨‹ ID
netstat -ano | findstr :38080

# åœæ­¢è¿›ç¨‹ (æ›¿æ¢ <PID> ä¸ºå®é™…è¿›ç¨‹ ID)
powershell.exe -Command "Stop-Process -Id <PID> -Force"
```

**Linux/Mac**:
```bash
# æŸ¥æ‰¾å¹¶åœæ­¢è¿›ç¨‹
lsof -ti:38080 | xargs kill -9
```

---

## ğŸš€ å¯åŠ¨æœåŠ¡

### åç«¯
```bash
cd backend
npm run dev
```

**é¢„æœŸè¾“å‡º**:
```
ğŸš€ Server running on http://localhost:38080
ğŸ“¦ Database: sqlite
âœ… Development server started successfully!
```

### å‰ç«¯
```bash
cd frontend/web
pnpm dev
```

**é¢„æœŸè¾“å‡º**:
```
VITE v5.4.21  ready in xxx ms
âœ  Local:   http://localhost:5173/
```

---

## âš™ï¸ å¦‚ä½•ä¿®æ”¹ç«¯å£

å¦‚æœéœ€è¦æ›´æ”¹ç«¯å£ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### 1. ä¿®æ”¹åç«¯ç«¯å£

ç¼–è¾‘ `backend/.env.development`:
```bash
PORT=ä½ çš„ç«¯å£å·
```

### 2. ä¿®æ”¹å‰ç«¯ä»£ç†

ç¼–è¾‘ `frontend/web/vite.config.ts`:
```typescript
proxy: {
  '/api': {
    target: 'http://localhost:ä½ çš„ç«¯å£å·',
    changeOrigin: true,
  },
}
```

### 3. æ›´æ–°å‰ç«¯ç¯å¢ƒé…ç½®

ç¼–è¾‘ `frontend/web/.env.development`:
```bash
VITE_API_BASE_URL=http://localhost:ä½ çš„ç«¯å£å·
```

### 4. é‡å¯æœåŠ¡

åœæ­¢å¹¶é‡æ–°å¯åŠ¨å‰åç«¯æœåŠ¡ã€‚

---

## ğŸ’¡ ç«¯å£é€‰æ‹©å»ºè®®

### æ¨èç«¯å£èŒƒå›´
- **å¼€å‘ç¯å¢ƒ**: 30000-40000 (ä¸å¸¸ç”¨ç«¯å£)
- **ç”Ÿäº§ç¯å¢ƒ**: 80 (HTTP) æˆ– 443 (HTTPS)

### é¿å…ä½¿ç”¨çš„ç«¯å£
- `3000`: Reactã€Next.js é»˜è®¤ç«¯å£
- `8000`: Python Django é»˜è®¤ç«¯å£
- `8080`: Tomcatã€Jenkins å¸¸ç”¨ç«¯å£
- `5000`: Flask é»˜è®¤ç«¯å£
- `4200`: Angular é»˜è®¤ç«¯å£

### å½“å‰ä½¿ç”¨ç«¯å£çš„ä¼˜åŠ¿
- âœ… `38080`: ä¸å¸¸è§ï¼Œå†²çªæ¦‚ç‡æä½
- âœ… æ˜“è®°ï¼ˆ38 = 3 + 8ï¼Œç±»ä¼¼ 38 åº¦çº¿ï¼‰
- âœ… åœ¨å…è®¸çš„éç‰¹æƒç«¯å£èŒƒå›´å†… (>1024)

---

## ğŸ” ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹

### ä½¿ç”¨åå‘ä»£ç†

ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Nginx æˆ– Apache ä½œä¸ºåå‘ä»£ç†ï¼š

```nginx
# Nginx é…ç½®ç¤ºä¾‹
server {
    listen 80;
    server_name your-domain.com;

    location /api {
        proxy_pass http://localhost:38080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

### é˜²ç«å¢™é…ç½®

ç¡®ä¿é˜²ç«å¢™å…è®¸åç«¯ç«¯å£è®¿é—®ï¼ˆä»…é™å†…ç½‘æˆ–é€šè¿‡åå‘ä»£ç†ï¼‰ï¼š

```bash
# Ubuntu/Debian (UFW)
sudo ufw allow 38080/tcp

# CentOS/RHEL (firewalld)
sudo firewall-cmd --add-port=38080/tcp --permanent
sudo firewall-cmd --reload
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—.md](./å¿«é€Ÿå¯åŠ¨æŒ‡å—.md) - å¯åŠ¨æ­¥éª¤
- [å‰åç«¯å¯¹æ¥æŒ‡å—.md](./å‰åç«¯å¯¹æ¥æŒ‡å—.md) - API æ–‡æ¡£
- [è¿è¡ŒçŠ¶æ€-å½“å‰.md](./è¿è¡ŒçŠ¶æ€-å½“å‰.md) - å½“å‰çŠ¶æ€

---

**ç«¯å£é…ç½®å·²ä¼˜åŒ–ï¼ä½¿ç”¨ 38080 ç«¯å£é¿å…å†²çªï¼** ğŸš€

